<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">
<head>
    <title>New Patient</title>
    <div th:insert="~{fragments/imports :: head}"></div>
</head>

<body id="page-top">
<!-- Page Wrapper -->
<div id="wrapper">
    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
        <div th:insert="~{fragments/imports :: sidebar}"></div>
    </ul>
    <!-- End of Sidebar -->
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">

            <!-- Top bar -->
            <div th:insert="~{fragments/imports :: topbar}"></div>
            <!-- Begin Page Content -->
            <div class="container-fluid">
                <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a th:href="@{/index}">Home</a></li>
                    <li class="breadcrumb-item active"><a th:href="@{/patient/}">List of Patient</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Form of Patient</li>
                </ol>
                </nav>

                
                <!-- Messege  -->
                <div class="alert alert-success alert-dismissible fade show" th:if="${msg != null}"   role="alert">
                <strong th:text="${msg}"></strong>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>

                <div class= "card shadow mb-4">

                    <div class="card-header text-center">
                        <h6 class="m-0 font-weight "><i class="fas fa-file-medical"></i> Form Patient</h6>
                    </div>
        
                    <div class= "card-body">
                        <form class="row g-3"  th:action="@{/patient/create}" th:object="${patient}" method="post" enctype="multipart/form-data">
        
                            <!-- ALERTA DE ERRORES-->
                            <div th:if="${#fields.hasErrors('*')}" class='alert alert-danger' role='alert'>
                                Por favor corrija los siguientes errores:
                                <ul>
                                    <li th:each="err :${#fields.errors('*')}" th:text="${err}"></li>
                                </ul>
                            </div>
        
                          
        
                            <input type="text" th:field="*{id}">
                            <input type="text" th:field="*{record.id}">
                            <!--<input type="hidden" th:field="*{paciente.filiacion.id_filiacion}">
                            <input type="hidden" th:field="*{paciente.usuario.fecha_ingreso}">
                            <input type="hidden" th:field="*{password}">
                            <input type="hidden" th:value="2" th:field="*{roles}"> -->
        
                            <div class="col-12"><label class="text-dark">Personal information</label><br></div>
                                <!--RUT-->
                                <div class="col-md-3">
                                <input type="text" class="form-control" th:field="*{rut}"  id="rut" placeholder="Rut"
                                    oninput="checkRut(this)"   required="required">
                                <script th:src="@{/js/myFunctions.js}"></script>
                                </div>
        
                                <!--Foto perfil-->
                                <div class="col-md-3">
                                    <input type="file" class="form-control"  name="fileProfile"  aria-describedby="helpId" >
                                    <small>Select a profile picture</small>
                                </div>   

                                <div class="col-12"><br></div>
        
                                <!--NAME-->
                                <div class="col-md-3">
                                <input type="text" class=" form-control" th:field="*{name}"  id="name" placeholder="Name"  required="required">
                                </div>
        
                                <!-- LAST NAME -->
                                <div class="col-md-3">
                                <input type="text" class="form-control"  th:field="*{lastName}"  placeholder="Last name" id="lastName" required="required">
                                </div>

                                <div class="col-12"><br></div>
                                
                                
                                <!--Nationality-->
                                <!-- <div class="col-md-3">
                                    <input type="text" class="form-control" th:field="*{nationality}" placeholder="nationality"  id="nationality" required="required">
                                </div> -->
        
                                <!--REGION-->
                                <!-- <div class="col-md-3">
                                <input type="text" class="form-control" th:field="*{region}" placeholder="Region"  id="region"   required="required">
                                </div> -->
        
                                <!--COMUNA-->
                                <!-- <div class="col-md-3">
                                <input type="text" class="form-control" th:field="*{city}" placeholder="City" id="city" required="required">
                                </div> -->
        
                                <!-- ADDRESS -->
                                <!-- <div class="col-md-4">
                                <input type="text" class="form-control" th:field="*{address}" placeholder="Address" id="address"   required="required">
                                </div> -->
        
        
                                <div class="col-12"><br><label class="text-dark">Patient data</label><br></div>
                                <!-- PREVISION -->
                                <!-- <div class="col-md-3">
                                <select class="selectpicker show-tick form-control"  th:field="*{prevision}" id="prevision" required="required">
                                    <option value="" selected>Prevision</option>
                                    <option th:value= 0 th:text="Fonasa"></option>
                                    <option th:value= 1 th:text="Isapre"></option>
                                </select>
                                </div> -->
        
        
                                <!-- SEXO -->
                                <!-- <div class="col-md-3">
                                <select class="selectpicker show-tick form-control" th:field="*{record.sexo}" id="sexo" required="required">
                                    <option value="" selected>Sexo</option>
                                    <option th:value= 0 th:text="Masculino"></option>
                                    <option th:value= 1 th:text="Femenino"></option>
                                </select>
                                </div> -->
        
        
                                <!-- Etnia -->
                                <!-- <div class="col-md-3">
                                <select class="selectpicker show-tick form-control"  th:field="*{paciente.filiacion.raza}" id="raza" name="raza" required="required">
                                    <option value="" selected>Etnia</option>
                                    <option th:value="'ng'" th:text="AfroAmericano"></option>
                                    <option th:value="'bl'" th:text="Caucasico"></option>
                                </select>
                                </div> -->
        
                                <!--BIRTH DATE-->
                                <div class="col-md-3">
                                    <input class = "form-control" title="Birth date" type="date" th:field="*{record.birthDate}" id="birthDate" required = "required">
                                    <small>Birth date</small>
                                </div>
        
                                <div class="col-12"><br><label class="text-dark" >Contact</label><br></div>
        
                                <!--MAIL-->
                                <div class="input-group col-md-4">
                                <span class="input-group-text" >@</span>
                                <input type="email" th:field="*{mail}" id="mail"  placeholder="Mail" class="form-control" required="required">
                                </div>
        
                                <!--PHONE-->
                                <!-- <div class="col-md-2">
                                <input type="text" class="form-control" th:field="*{phone}"  id="phone"  placeholder="Phone" required="required">
                                </div> -->
        
                                <!--PHONE SECOND-->
                                <!-- <div class="col-md-2">
                                <input type="text" class="form-control" th:field="*{phoneSecond}" placeholder="Phone second" id="phoneSecond">
                                </div> -->
        
                                <div class="col-12"><br></div>
                                <!--ENABLED-->
                                <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="flexCheckDefault"
                                        th:field="*{enabled}">
                                    <label class="form-check-label" for="flexCheckDefault"> Â¿Enable User? </label>
                                </div>
                                </div>
                                <br>
                                <div class="col-12">
                                    <button class="btn btn-primary" type="submit">Submit</button>
                                </div>
                        </form>
                    </div>
                    </div>
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- End of Main Content -->
        <!-- Footer -->
        <footer th:insert="~{fragments/imports :: footer}"></footer>
        <!-- End Footer -->
    </div>
    <!-- End of Content Wrapper -->
</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>
<div th:insert ="~{fragments/imports :: display-topbar}"></div>
<div th:insert = "~{fragments/imports :: scripts}"></div>
</body>
</html>